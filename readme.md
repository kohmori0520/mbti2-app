# ğŸ§  æ¬¡ä¸–ä»£ã‚¿ã‚¤ãƒ—è¨ºæ–­ï¼ˆmbti2-appï¼‰

> **3åˆ†ã§åˆ¤å®šï¼ã‚ãªãŸã®æ€§æ ¼ã‚¿ã‚¤ãƒ—ã‚’ AI ãŒç§‘å­¦çš„ã«åˆ†æ**

<div align="center">

![Next.js](https://img.shields.io/badge/Next.js-React-blue)
![TypeScript](https://img.shields.io/badge/TypeScript-v5.5-blue)
![AI Powered](https://img.shields.io/badge/AI-Powered-green)
![Vercel](https://img.shields.io/badge/Deploy-Vercel-black)

</div>

---

## âœ¨ ç‰¹å¾´

| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| ğŸ¯ **é«˜ç²¾åº¦è¨ºæ–­** | 4è»¸ã‚¹ã‚³ã‚¢ã‹ã‚‰12ã®ç‹¬è‡ªã‚¿ã‚¤ãƒ—ã¸ãƒãƒƒãƒ”ãƒ³ã‚° |
| ğŸ¤– **AIåˆ†æ** | OpenAI ã«ã‚ˆã‚‹è©³ç´°ãªæ€§æ ¼åˆ†æ |
| âš¡ **é«˜é€Ÿæ“ä½œ** | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œå¯¾å¿œï¼ˆ1/2ã‚­ãƒ¼ã€çŸ¢å°ã‚­ãƒ¼ï¼‰ |
| ğŸ’¾ **è‡ªå‹•å¾©å…ƒ** | å›ç­”ã®è‡ªå‹•ä¿å­˜ãƒ»å¾©å…ƒæ©Ÿèƒ½ |
| ğŸ“Š **ãƒ‡ãƒ¼ã‚¿åˆ†æ** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆãƒ»ã‚«ãƒ†ã‚´ãƒªåˆ¥åˆ†æ |
| ğŸ—„ï¸ **Supabaseçµ±åˆ** | ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ |
| ğŸ’• **ç›¸æ€§è¨ºæ–­** | ã‚¿ã‚¤ãƒ—é–“ã®ç›¸æ€§ã¨ãƒãƒ¼ãƒ æ§‹æˆåˆ†æ |
| ğŸ’¼ **ã‚­ãƒ£ãƒªã‚¢æ”¯æ´** | è©³ç´°ãªã‚­ãƒ£ãƒªã‚¢ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ãƒ»æˆé•·ã‚¢ãƒ‰ãƒã‚¤ã‚¹ |
| ğŸ–¼ï¸ **å‹•çš„OGç”»åƒ** | çµæœã«å¿œã˜ãŸå…±æœ‰ç”¨ç”»åƒã‚’è‡ªå‹•ç”Ÿæˆ |
| ğŸ“± **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–** | PCãƒ»ã‚¹ãƒãƒ›å¯¾å¿œ |

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1ï¸âƒ£ åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
cp .env.example .env.local
# .env.local ã«å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
```

### 2ï¸âƒ£ Supabaseã®è¨­å®š

**ğŸ  ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºï¼ˆæ¨å¥¨ï¼‰:**
```bash
# Supabase CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆä¸€å›ã®ã¿ï¼‰
brew install supabase/tap/supabase

# ãƒ­ãƒ¼ã‚«ãƒ«Supabaseã‚’èµ·å‹•
npm run supabase:start

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev
```

**â˜ï¸ ã‚¯ãƒ©ã‚¦ãƒ‰ç‰ˆï¼ˆæœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ï¼‰:**
1. [Supabase](https://supabase.com) ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
2. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š:
```bash
# .env.local ã«è¿½åŠ 
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```
3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆ:
```bash
# Supabase SQL Editor ã§å®Ÿè¡Œ
cat supabase/schema.sql
```

### 3ï¸âƒ£ é–‹ç™ºç’°å¢ƒã®èµ·å‹•
```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆReact + Viteï¼‰
npm run dev
# ğŸŒ http://localhost:5173 ã§èµ·å‹•

# AIåˆ†æAPIï¼ˆExpress ã‚µãƒ¼ãƒãƒ¼ï¼‰â€»åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§
npm run api:dev
# ğŸŒ http://localhost:8787/api/analyze ã§èµ·å‹•
```

### 4ï¸âƒ£ ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹
ğŸ‰ `http://localhost:5173` ã‚’é–‹ã„ã¦è¨ºæ–­é–‹å§‹ï¼

**âœ¨ æ–°æ©Ÿèƒ½:**
- `/analytics` - åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `/category-analysis` - ã‚«ãƒ†ã‚´ãƒªåˆ¥åˆ†æ
- è©³ç´°ãªç›¸æ€§ãƒ»ã‚­ãƒ£ãƒªã‚¢æƒ…å ±

---

## ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
ğŸ“ mbti2-app/
â”œâ”€â”€ ğŸ“„ package.json          # ä¾å­˜é–¢ä¿‚ã¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ ğŸŒ api/
â”‚   â”œâ”€â”€ analyze.ts           # AIåˆ†æAPIï¼ˆServerlessï¼‰
â”‚   â””â”€â”€ og.tsx              # å‹•çš„OGç”»åƒç”Ÿæˆï¼ˆEdge Functionï¼‰
â”œâ”€â”€ ğŸ–¥ï¸ server/
â”‚   â””â”€â”€ index.js            # ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨APIã‚µãƒ¼ãƒãƒ¼
â”œâ”€â”€ âš›ï¸ src/
â”‚   â”œâ”€â”€ components/         # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ data/              # è³ªå•ãƒ‡ãƒ¼ã‚¿ã¨ã‚¿ã‚¤ãƒ—å®šç¾©
â”‚   â”œâ”€â”€ logic/             # ã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ pages/             # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ utils/             # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â””â”€â”€ ğŸ› ï¸ scripts/
    â”œâ”€â”€ analyze_logs.mjs    # ãƒ­ã‚°è§£æã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    â””â”€â”€ apply_weight_suggestions.mjs # é‡ã¿èª¿æ•´ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

---

## âš™ï¸ ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# .env ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¨­å®š
OPENAI_API_KEY=your-openai-api-key-here

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚ã‚Šï¼‰
ANALYZE_CACHE_TTL_MS=3600000     # ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹æœŸé–“ï¼ˆ1æ™‚é–“ï¼‰
ANALYZE_RETRY_ATTEMPTS=3         # ãƒªãƒˆãƒ©ã‚¤å›æ•°
ANALYZE_TIMEOUT_MS=15000         # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆ15ç§’ï¼‰
```

> âš ï¸ **é‡è¦**: `.env` è¨­å®šå¾Œã¯ `npm run api:dev` ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„

---

## ğŸ” è¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ ã®ä»•çµ„ã¿

### ğŸ“‹ è¨ºæ–­ãƒ•ãƒ­ãƒ¼
1. **è³ªå•å›ç­”** - A/Bã®äºŒæŠè³ªå•ã«å›ç­”
2. **ã‚¹ã‚³ã‚¢è¨ˆç®—** - 4è»¸ï¼ˆå¤–å‘/å†…å‘ã€æ„Ÿè¦š/ç›´è¦³ã€æ€è€ƒ/æ„Ÿæƒ…ã€åˆ¤æ–­/çŸ¥è¦šï¼‰ã§ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
3. **ã‚¿ã‚¤ãƒ—åˆ¤å®š** - 12ã®ç‹¬è‡ªã‚¿ã‚¤ãƒ—ã«ãƒãƒƒãƒ”ãƒ³ã‚°
4. **AIåˆ†æ** - OpenAI ã«ã‚ˆã‚‹è©³ç´°åˆ†æ
5. **çµæœè¡¨ç¤º** - å¼·ã¿ã‚„æˆé•·ãƒã‚¤ãƒ³ãƒˆã‚’è¡¨ç¤º

### ğŸ® æ“ä½œæ–¹æ³•
| ã‚­ãƒ¼ | å‹•ä½œ |
|------|------|
| `1` or `A` | é¸æŠè‚¢A |
| `2` or `B` | é¸æŠè‚¢B |
| `â†` | å‰ã®è³ªå• |
| `â†’` | æ¬¡ã®è³ªå• |
| `Enter` | ç¢ºå®š |

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿åˆ†ææ©Ÿèƒ½

### ãƒ­ã‚°ã®ä¿å­˜ã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
è¨ºæ–­çµæœç”»é¢ã®ã€Œ**ãƒ­ã‚°ã‚’CSVã§ä¿å­˜**ã€ãƒœã‚¿ãƒ³ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### ãƒ­ã‚°è§£æã«ã‚ˆã‚‹é‡ã¿èª¿æ•´
```bash
# 1. ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£æï¼ˆæœ€å°ã‚µãƒ³ãƒ—ãƒ«æ•°: 20ï¼‰
npm run analyze:logs -- "/path/to/personality_logs.csv" 10

# 2. é‡ã¿ææ¡ˆã®é©ç”¨ï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è‡ªå‹•ä½œæˆï¼‰
npm run apply:weights
```

> ğŸ’¡ **Tip**: ã‚µãƒ³ãƒ—ãƒ«æ•°ãŒå°‘ãªã„å ´åˆã¯ç¬¬2å¼•æ•°ã§æœ€å°ã‚µãƒ³ãƒ—ãƒ«æ•°ã‚’ä¸‹ã’ã¦ãã ã•ã„

---

## ğŸ–¼ï¸ å‹•çš„OGç”»åƒ

### ğŸ¨ ç”»åƒã®ç¢ºèªæ–¹æ³•
```
https://your-domain/api/og?title=ã‚¿ã‚¤ãƒ—T1&subtitle=ãƒªãƒ¼ãƒ€ãƒ¼å‹&accent=%23007AFF
```
> âš ï¸ **æ³¨æ„**: `#` ã¯ `%23` ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„

### ğŸ“ HTMLè¨­å®šä¾‹
```html
<meta property="og:title" content="æ¬¡ä¸–ä»£ã‚¿ã‚¤ãƒ—è¨ºæ–­" />
<meta property="og:description" content="ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã‚’3åˆ†ã§è¨ºæ–­" />
<meta property="og:image" content="https://your-domain/api/og?title=æ¬¡ä¸–ä»£ã‚¿ã‚¤ãƒ—è¨ºæ–­&subtitle=3åˆ†ã§åˆ¤å®š&accent=%23007AFF" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta name="twitter:card" content="summary_large_image" />
```

---

## ğŸš¢ ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆVercelï¼‰

### 1ï¸âƒ£ Vercelè¨­å®š
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "functions": {
    "api/analyze.ts": { "runtime": "nodejs18.x" },
    "api/og.tsx": { "runtime": "edge" }
  }
}
```

### 2ï¸âƒ£ ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
Vercel Dashboard â†’ Project Settings â†’ Environment Variables
- `OPENAI_API_KEY`
- ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¤‰æ•°

### 3ï¸âƒ£ è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨è‡ªå‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã™ ğŸ‰

---

## ğŸ”§ ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

### âŒ `ECONNREFUSED` ã‚¨ãƒ©ãƒ¼
```bash
# è§£æ±ºæ–¹æ³•: APIã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run api:dev
```

### âŒ OGç”»åƒã®è‰²ãŒåæ˜ ã•ã‚Œãªã„
```bash
# è§£æ±ºæ–¹æ³•: # ã‚’ %23 ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
âŒ #007AFF
âœ… %23007AFF
```

### âŒ zshã§ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚¨ãƒ©ãƒ¼
```bash
# è§£æ±ºæ–¹æ³•: ãƒ‘ã‚¹ã‚’ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã‚€
npm run analyze:logs -- "/path/with spaces/file.csv"
```

### âŒ ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒã‚¨ãƒ©ãƒ¼
é–‹ç™ºè€…ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§è­¦å‘Šã‚’ç¢ºèªã—ã€ä»¥ä¸‹ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ï¼š
- `src/data/personality_questions.json`
- `src/data/persona_details.json`

---

## ğŸ§ª æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ |
|----------|------|
| **Frontend** | React 18, TypeScript, Vite |
| **Backend** | Express.js, Node.js |
| **AI** | OpenAI API |
| **Deploy** | Vercel (Serverless + Edge Functions) |
| **Validation** | Zod |
| **Storage** | LocalStorage |

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

å†…éƒ¨åˆ©ç”¨å‰æã®è©¦ä½œå“ã§ã™ã€‚å¤–éƒ¨é…å¸ƒæ™‚ã¯è³ªå•æ–‡ã‚„ã‚¿ã‚¤ãƒ—è¨˜è¿°ç­‰ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ¨©åˆ©è¡¨è¨˜ã«ã”æ³¨æ„ãã ã•ã„ã€‚

---

<div align="center">

**ğŸ¯ 3åˆ†ã§å§‹ã‚ã‚‹æ€§æ ¼è¨ºæ–­ - ã‚ˆã‚Šæ·±ã„è‡ªå·±ç†è§£ã¸**

[ãƒ‡ãƒ¢ã‚’è¦‹ã‚‹](#) | [ãƒã‚°å ±å‘Š](https://github.com/your-repo/issues) | [æ©Ÿèƒ½è¦æœ›](https://github.com/your-repo/discussions)

</div>